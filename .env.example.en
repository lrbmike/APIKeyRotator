# ==========================================
# Dynamic Configuration Solution - Multiple Deployment Modes
# ==========================================
#
# Default: SQLite + Memory Cache (Lightweight Mode)
# When MySQL or Redis environment variables are detected, automatically switch to corresponding方案
#
# === Lightweight Mode (Default) ===
# No database/cache variables set, system will automatically use:
# - Database: SQLite (file: /app/data/api_key_rotator.db)
# - Cache: Memory Cache
#
# === Enterprise Mode ===
# Set the following variables to automatically switch to MySQL + Redis:
# - DB_HOST, DB_USER, DB_PASSWORD, etc. -> Switch to MySQL
# - REDIS_HOST, REDIS_PORT, etc. -> Switch to Redis

# === MySQL Configuration (Optional - defaults to SQLite if not set) ===
# Method 1: Use connection string
# DATABASE_URL=mysql://user:password@tcp(host:port)/database?charset=utf8mb4&parseTime=True&loc=Local

# Method 2: Use separate configuration variables
DB_HOST=localhost
DB_USER=appdb
DB_PASSWORD=your_strong_password
DB_NAME=api_key_rotator
DB_PORT=3306

# === Redis Configuration (Optional - defaults to memory cache if not set) ===
REDIS_HOST=localhost          # Required to enable Redis
REDIS_PORT=6379               # Optional, defaults to 6379
REDIS_PASSWORD=               # Optional, defaults to empty string
REDIS_URL=redis://localhost:6379/0  # Optional, alternative connection string
REDIS_DB=0                    # Optional, defaults to 0

# === SQLite Configuration (Only effective when using SQLite) ===
DATABASE_PATH=/app/data/api_key_rotator.db

# === Docker Deployment Related ===
MYSQL_ROOT_PASSWORD=a_very_strong_root_password

# Backend Port
BACKEND_PORT=8000

# Frontend Port
FRONTEND_PORT=5173
# Local development address
VITE_API_TARGET_URL=http://backend:8000

# Nginx Configuration
NGINX_PORT=80
NGINX_SSL_PORT=443

# === Required Security Configuration ===
# Must be set for the application to run properly
ADMIN_PASSWORD=your_admin_password_here
JWT_SECRET=your_very_secret_and_random_jwt_key
GLOBAL_PROXY_KEYS=your_secure_global_proxy_key

# === Service Configuration (Optional) ===
# Global Proxy Authentication Key
# Any request to the proxy address must include 'X-Proxy-Key' in the header.
#
# Supports a single key or multiple keys (comma-separated):
# Single key: GLOBAL_PROXY_KEYS=a_very_secret_key
# Multiple keys: GLOBAL_PROXY_KEYS=key1,key2,key3

# Public Base URL for the proxy service
PROXY_PUBLIC_BASE_URL=https://api.yourdomain.com

# Database table reset option (if set to true, all tables will be dropped and recreated)
RESET_DB_TABLES=false

# Logging configuration
LOG_LEVEL=info